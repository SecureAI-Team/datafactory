server {
  listen 80;
  server_name _;
  resolver 127.0.0.11 ipv6=off valid=10s;

  location /api/ { set $upstream http://api:8000; proxy_pass $upstream; }
  location /chat/ { set $upstream http://open-webui:8080; proxy_pass $upstream; auth_basic "Restricted"; auth_basic_user_file /etc/nginx/conf.d/.htpasswd; }
  location /portal/ { set $upstream http://budibase:10000; proxy_pass $upstream; }
  location /airflow/ { set $upstream http://airflow:8080; proxy_pass $upstream; }
  location /langfuse/ { set $upstream http://langfuse:3000; proxy_pass $upstream; }
  location /openmetadata/ { set $upstream http://openmetadata:8585; proxy_pass $upstream; }
  location /dq-docs/ { alias /usr/share/nginx/html/dq-docs/; }
  location /opensearch/ { set $upstream http://opensearch:9200; proxy_pass $upstream; }
  location /minio/ { set $upstream http://minio:9001; proxy_pass $upstream; }
  location /n8n/ { set $upstream http://n8n:5678; proxy_pass $upstream; }
}
